<div class="comentarios-container">
    <h2>ğŸ’¬ ComentÃ¡rios</h2>

    <!-- ReaÃ§Ãµes -->
    <div class="reacoes">
        <button class="reacao" data-reacao="ğŸ‘">ğŸ‘ <span id="like-count">0</span></button>
        <button class="reacao" data-reacao="â¤ï¸">â¤ï¸ <span id="love-count">0</span></button>
        <button class="reacao" data-reacao="ğŸ˜‚">ğŸ˜‚ <span id="laugh-count">0</span></button>
        <button class="reacao" data-reacao="ğŸ˜®">ğŸ˜® <span id="wow-count">0</span></button>
        <button class="reacao" data-reacao="ğŸ˜¢">ğŸ˜¢ <span id="sad-count">0</span></button>
        <button class="reacao" data-reacao="ğŸ˜¡">ğŸ˜¡ <span id="angry-count">0</span></button>
    </div>

    <!-- FormulÃ¡rio -->
    <form id="comentario-form">
        <input type="text" id="nome" placeholder="Seu nome">
        <textarea id="comentario" placeholder="Escreva seu comentÃ¡rio"></textarea>
        <button type="submit">Enviar</button>
    </form>

    <!-- Lista de comentÃ¡rios -->
    <div id="comentarios-list"></div>
</div>

<script>
    const scriptURL = "https://script.google.com/macros/s/AKfycbxt2_JLXL9jyl2NDr_uPnZ26zcED95LFCt9z6pt1Gv8FcGsXw2S0LsiUzr2s2nnw3Pvwg/exec";
    const urlPagina = window.location.pathname;

    // FunÃ§Ã£o para enviar comentÃ¡rio
    document.getElementById("comentario-form").addEventListener("submit", async (e) => {
        e.preventDefault();
        const nome = document.getElementById("nome").value || "AnÃ´nimo";
        const comentario = document.getElementById("comentario").value;

        if (!comentario.trim()) return alert("Digite um comentÃ¡rio!");

        await fetch(scriptURL, {
            method: "POST",
            body: JSON.stringify({ url: urlPagina, nome, comentario, reacao: "" }),
        });

        document.getElementById("comentario").value = "";
        carregarComentarios();
    });

    // FunÃ§Ã£o para enviar reaÃ§Ã£o
    async function enviarReacao(reacao) {
        await fetch(scriptURL, {
            method: "POST",
            body: JSON.stringify({ url: urlPagina, nome: "AnÃ´nimo", comentario: "", reacao }),
        });
        carregarComentarios();
    }

    // Adicionar evento aos botÃµes de reaÃ§Ã£o
    document.querySelectorAll(".reacao").forEach(btn => {
        btn.addEventListener("click", () => {
            enviarReacao(btn.getAttribute("data-reacao"));
        });
    });

    // Carregar comentÃ¡rios e reaÃ§Ãµes
    async function carregarComentarios() {
        const res = await fetch(`${scriptURL}?url=${encodeURIComponent(urlPagina)}`);
        const dados = await res.json();

        const lista = document.getElementById("comentarios-list");
        lista.innerHTML = "";

        // ComentÃ¡rios
        dados.comentarios.forEach(c => {
            const div = document.createElement("div");
            div.style.marginBottom = "10px";
            div.style.padding = "8px";
            div.style.borderBottom = "1px solid #333";
            div.innerHTML = `
            <strong>${c.nome}</strong> 
            <em>(${new Date(c.data).toLocaleString()})</em><br>
            ${c.comentario}
        `;
            lista.appendChild(div);
        });

        // Atualizar contadores de reaÃ§Ãµes
        const emojiMap = {
            "ğŸ‘": "like-count",
            "â¤ï¸": "love-count",
            "ğŸ˜‚": "laugh-count",
            "ğŸ˜®": "wow-count",
            "ğŸ˜¢": "sad-count",
            "ğŸ˜¡": "angry-count"
        };

        for (const emoji in emojiMap) {
            const span = document.getElementById(emojiMap[emoji]);
            if (span) {
                span.textContent = dados.reacoes[emoji] || 0;
            }
        }
    }

    // Atualiza a cada 5 segundos
    carregarComentarios();
    setInterval(carregarComentarios, 5000);
</script>

<style>
    .comentarios-container {
        max-width: 600px;
        margin: 30px auto;
        background: #1e1e1e;
        padding: 20px;
        border-radius: 12px;
        color: #f1f1f1;
        font-family: "Segoe UI", sans-serif;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
    }

    .comentarios-container h2 {
        text-align: center;
        margin-bottom: 15px;
        color: #ffcc00;
    }

    .reacoes {
        display: flex;
        justify-content: center;
        flex-wrap: wrap;
        gap: 12px;
        margin-bottom: 20px;
    }

    .reacao {
        background: #2a2a2a;
        border: none;
        padding: 10px 18px;
        border-radius: 20px;
        color: #fff;
        font-size: 18px;
        cursor: pointer;
        transition: transform 0.2s, background 0.3s;
    }

    .reacao:hover {
        background: #444;
        transform: scale(1.1);
    }

    .reacao span {
        font-weight: bold;
        margin-left: 6px;
        color: #ffcc00;
    }

    #comentario-form {
        display: flex;
        flex-direction: column;
        gap: 10px;
    }

    #comentario-form input,
    #comentario-form textarea {
        padding: 10px;
        border-radius: 8px;
        border: 1px solid #555;
        background: #2a2a2a;
        color: #f1f1f1;
        font-size: 14px;
    }

    #comentario-form button {
        background: #ffcc00;
        color: #000;
        padding: 12px;
        border: none;
        border-radius: 8px;
        font-weight: bold;
        cursor: pointer;
        transition: background 0.3s;
    }

    #comentario-form button:hover {
        background: #ffaa00;
    }

    #comentarios-list {
        margin-top: 20px;
    }
</style>