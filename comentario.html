<div class="comentarios-container">
    <h2>üí¨ Coment√°rios</h2>

    <!-- Rea√ß√µes -->
    <div class="reacoes">
        <button class="reacao" data-reacao="üëç">üëç <span id="like-count">0</span></button>
        <button class="reacao" data-reacao="‚ù§Ô∏è">‚ù§Ô∏è <span id="love-count">0</span></button>
        <button class="reacao" data-reacao="üòÇ">üòÇ <span id="laugh-count">0</span></button>
        <button class="reacao" data-reacao="üòÆ">üòÆ <span id="wow-count">0</span></button>
        <button class="reacao" data-reacao="üò¢">üò¢ <span id="sad-count">0</span></button>
        <button class="reacao" data-reacao="üò°">üò° <span id="angry-count">0</span></button>
    </div>

    <!-- Formul√°rio -->
    <form id="comentario-form">
        <input type="text" id="nome" placeholder="Seu nome">
        <textarea id="comentario" placeholder="Escreva seu coment√°rio"></textarea>
        <button type="submit">Enviar</button>
    </form>

    <!-- Lista -->
    <div id="comentarios-list"></div>
</div>


<script>
    const scriptURL = "https://script.google.com/macros/s/AKfycbxt2_JLXL9jyl2NDr_uPnZ26zcED95LFCt9z6pt1Gv8FcGsXw2S0LsiUzr2s2nnw3Pvwg/exec";
    const urlPagina = window.location.pathname;

    // Enviar coment√°rio
    document.getElementById("formComentario").addEventListener("submit", async (e) => {
        e.preventDefault();
        const nome = document.getElementById("nome").value;
        const comentario = document.getElementById("comentario").value;

        if (!comentario.trim()) return alert("Digite um coment√°rio!");

        await fetch(scriptURL, {
            method: "POST",
            body: JSON.stringify({ url: urlPagina, nome, comentario, reacao: "" }),
        });

        document.getElementById("comentario").value = "";
        carregarComentarios();
    });

    // Enviar rea√ß√£o
    async function enviarReacao(reacao) {
        await fetch(scriptURL, {
            method: "POST",
            body: JSON.stringify({ url: urlPagina, nome: "An√¥nimo", comentario: "", reacao }),
        });
        carregarComentarios();
    }

    // Carregar coment√°rios + rea√ß√µes
    async function carregarComentarios() {
        const res = await fetch(`${scriptURL}?url=${encodeURIComponent(urlPagina)}`);
        const dados = await res.json();

        const lista = document.getElementById("listaComentarios");
        const reacoes = { "üëç": 0, "‚ù§Ô∏è": 0, "üòÇ": 0, "üòÆ": 0, "üò¢": 0, "üî•": 0 };

        lista.innerHTML = "";

        dados.forEach(c => {
            if (c.reacao) {
                // soma as rea√ß√µes
                if (reacoes[c.reacao] !== undefined) {
                    reacoes[c.reacao]++;
                }
            } else if (c.comentario) {
                // monta coment√°rio
                const div = document.createElement("div");
                div.style.marginBottom = "10px";
                div.style.padding = "8px";
                div.style.borderBottom = "1px solid #333";
                div.innerHTML = `
                    <strong>${c.nome}</strong> 
                    <em>(${new Date(c.data).toLocaleString()})</em><br>
                    ${c.comentario}
                `;
                lista.appendChild(div);
            }
        });

        // Atualizar contadores de rea√ß√µes
        for (const emoji in reacoes) {
            const span = document.getElementById("count-" + emoji);
            if (span) span.textContent = reacoes[emoji];
        }
    }

    // Atualiza a cada 5 segundos
    carregarComentarios();
    setInterval(carregarComentarios, 5000);
</script>




<style>
    .comentarios-container {
        max-width: 600px;
        margin: 30px auto;
        background: #1e1e1e;
        padding: 20px;
        border-radius: 12px;
        color: #f1f1f1;
        font-family: "Segoe UI", sans-serif;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
    }

    .comentarios-container h2 {
        text-align: center;
        margin-bottom: 15px;
        color: #ffcc00;
    }

    .reacoes {
        display: flex;
        justify-content: center;
        flex-wrap: wrap;
        gap: 12px;
        margin-bottom: 20px;
    }

    .reacao {
        background: #2a2a2a;
        border: none;
        padding: 10px 18px;
        border-radius: 20px;
        color: #fff;
        font-size: 18px;
        cursor: pointer;
        transition: transform 0.2s, background 0.3s;
    }

    .reacao:hover {
        background: #444;
        transform: scale(1.1);
    }

    .reacao span {
        font-weight: bold;
        margin-left: 6px;
        color: #ffcc00;
    }

    #comentario-form {
        display: flex;
        flex-direction: column;
        gap: 10px;
    }

    #comentario-form input,
    #comentario-form textarea {
        padding: 10px;
        border-radius: 8px;
        border: 1px solid #555;
        background: #2a2a2a;
        color: #f1f1f1;
        font-size: 14px;
    }

    #comentario-form button {
        background: #ffcc00;
        color: #000;
        padding: 12px;
        border: none;
        border-radius: 8px;
        font-weight: bold;
        cursor: pointer;
        transition: background 0.3s;
    }

    #comentario-form button:hover {
        background: #ffaa00;
    }

    #comentarios-list {
        margin-top: 20px;
    }

    .comentario-item {
        padding: 12px;
        background: #2a2a2a;
        border-radius: 8px;
        margin-bottom: 10px;
    }

    .comentario-item strong {
        color: #ffcc00;
    }
</style>